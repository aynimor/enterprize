### 2.1 ä¸‹è½½å’Œå®‰è£…

å®‰è£…ï¼š[https://www.rust-lang.org/learn/get-started](https://www.rust-lang.org/learn/get-started)

``` shell
$ cargo --version
cargo 1.59.0 (49d8809dc 2022-02-10)
$ rustc --version
rustc 1.59.0 (9d1b2106e 2022-02-23)
$ rustdoc --version
rustdoc 1.59.0 (9d1b2106e 2022-02-23)
$ 
```

- cargo æ˜¯ Rust çš„ç¼–è¯‘ç®¡ç†å·¥å…·ã€åŒ…ç®¡ç†å·¥å…·ä»¥åŠé€šç”¨å·¥å…·ã€‚å¯ä»¥ä½¿ç”¨ Cargo æ¥åˆ›å»ºæ–°é¡¹ç›®ã€æ„å»ºå’Œè¿è¡Œç¨‹åºï¼Œä»¥åŠç®¡ç†ä»£ç æ‰€ä¾èµ–çš„å¤–éƒ¨åº“
- rustc æ˜¯ Rust ç¼–è¯‘å™¨ã€‚ä½†ä¸€èˆ¬ä¸ç›´æ¥ä½¿ç”¨ã€‚
- rustdoc æ˜¯ Rust æ–‡æ¡£å·¥å…·ã€‚

ä½¿ç”¨ cargo åˆ›å»ºæ–°çš„é¡¹ç›®ï¼š

``` shell
$cargo new hello-world
    Created binary (application) `hello-world` package
```

ç›®å½•ä¸‹åŒ…å«ä»¥ä¸‹æ–‡ä»¶

``` 
total 0
drwxrwxrwx 1 root root 4096 Feb 27 17:07 .git
-rwxrwxrwx 1 root root    8 Feb 27 17:07 .gitignore
-rwxrwxrwx 1 root root  180 Feb 27 17:07 Cargo.toml
drwxrwxrwx 1 root root 4096 Feb 27 17:07 src
```

Cargo ä¼šè‡ªåŠ¨åˆ›å»º git ä»“åº“ï¼Œå¹¶ç”Ÿæˆ Cargo.toml ä¾èµ–åº“é…ç½®æ–‡ä»¶ï¼Œä»¥åŠå­˜æ”¾æºç çš„æ–‡ä»¶å¤¹ ./srcï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª main.rsæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

``` rust
fn main() {
    println!("Hello, world!");
}
```

ä½¿ç”¨ `cargo run` å‘½ä»¤å¼€å§‹æ„å»ºç¨‹åºï¼Œå¹¶è¿è¡Œç¨‹åºï¼Œshell ä¸­å°†ä¼šè¾“å‡ºï¼š`Hello, world!`ã€‚

### 2.2 ä¸€ä¸ªç®€å•çš„å‡½æ•°

```rust
fn gcd(mut n: u64, mut m: u64) -> u64 {
	assert!(n != 0 && m != 0);
	while m != 0 {
        if m < n {
            let t = m;
            m = n;
            n = m;
        }
        m = m % n;
    }
    n
}
```

è¿™ä¸ª Rust çš„ä¸€ä¸ªå‡½æ•°çš„å®šä¹‰ï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°ã€‚å…³é”®å­— `fn` å®šä¹‰äº†ä¸€ä¸ªåä¸º `gcd` çš„å‡½æ•°ï¼Œå…¶æ¥å—ä¸¤ä¸ªå‚æ•° `n` å’Œ `m`ï¼Œç±»å‹å‡ä¸º `u64`ï¼ˆæ— ç¬¦å·64ä¸ºæ•´æ•°ï¼‰ï¼Œç¬¦å· `->` åé¢æ˜¯å‡½æ•°çš„è¿”å›å€¼ç±»å‹ã€‚Rust ç¼©è¿›ä¸€èˆ¬çº¦å®š 4 ä¸ªç©ºæ ¼ã€‚

`mut` ä¸ºç‰¹æ®Šå…³é”®å­—ï¼Œåç»­å°†ä¼šå­¦åˆ°ï¼Œæ­¤å¤„éœ€è¦ä½¿ç”¨ `mut` æ¥æ ‡è¯†ï¼Œè¯´æ˜è¯¥å˜é‡æ˜¯å¯å˜çš„ï¼Œå¦åˆ™ç¨‹åºå°†æ— æ³•è¢«ç¼–è¯‘ã€‚

`assert!()` ä¸º Rust ä¸­çš„ä¸€ä¸ª **å®**ï¼Œå®ä¹Ÿæ˜¯ Rust ä¸­ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ï¼Œåç»­è¿˜ä¼šç”¨åˆ°ï¼Œ`assert` å®çš„å«ä¹‰ä¸ `C` ä¸­çš„ assert ç±»å‹ã€‚

`while` å…³é”®å­—åˆ™è¯´æ˜ä¸€ä¸ªå¾ªç¯ä½“ï¼Œå…¶åçš„è¡¨è¾¾å¼ `m != 0` æ˜¯å¾ªç¯ç»§ç»­è¿›è¡Œçš„æ¡ä»¶

`if` å…³é”®å­—æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ§åˆ¶æµï¼Œä¸ C ç±»ä¼¼

`let` ç”¨äºæŒ‡å®šå£°æ˜ä¸€ä¸ªå˜é‡

#### Rust åŸºæœ¬æ•°æ®ç±»å‹

> åœ¨ Rust ä¸­ï¼Œæ¯ä¸€ä¸ªå€¼éƒ½å±äºæŸä¸€ä¸ª **æ•°æ®ç±»å‹**ï¼ˆ*data type*ï¼‰ï¼Œè¿™å‘Šè¯‰ Rust å®ƒè¢«æŒ‡å®šä¸ºä½•ç§æ•°æ®ï¼Œä»¥ä¾¿æ˜ç¡®æ•°æ®å¤„ç†æ–¹å¼ã€‚æˆ‘ä»¬å°†çœ‹åˆ°ä¸¤ç±»æ•°æ®ç±»å‹å­é›†ï¼šæ ‡é‡ï¼ˆscalarï¼‰å’Œå¤åˆï¼ˆcompoundï¼‰ã€‚
>
> Rust æ˜¯ **é™æ€ç±»å‹**ï¼ˆ*statically typed*ï¼‰è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç¼–è¯‘æ—¶å°±å¿…é¡»çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚

Rust æ•´æ•°ç±»å‹å…±åˆ†ä¸ºï¼š`i8`ï¼Œ`i16`ï¼Œ`i32`ï¼Œ`i64`ï¼Œ`i128`ï¼Œ`isize`ï¼Œ`u8`ï¼Œ`u16`ï¼Œ`u32`ï¼Œ`u64`ï¼Œ`u128`ï¼Œ`usize`ã€‚

`i` å’Œ `u` è¡¨ç¤ºæ•´æ•°çš„ç¬¦å·ä½ï¼Œ`i` ä¸ºæœ‰ç¬¦å·æ•´æ•°ï¼Œ`u` ä¸ºæ— ç¬¦å·æ•´æ•°ã€‚æ•°å­—åˆ™è¡¨ç¤ºè¯¥ç±»å‹æ‰€å çš„ä½æ•°ï¼Œ`i8` åˆ™ä¸º  8 ä½æœ‰ç¬¦å·æ•´æ•°ã€‚`isize` å’Œ `usize` ä¸ºç‰¹æ®Šæƒ…å†µï¼Œå…¶ä¾èµ–äºè¿è¡Œè¯¥ç¨‹åºçš„è®¡ç®—æœºæ¶æ„ï¼š64 ä½æ¶æ„ä¸Šæ˜¯ 64 ä½æ•´æ•°ï¼Œ32 ä½æ¶æ„ä¸Šåˆ™æ˜¯ 32 ä½æ•´æ•°ã€‚

ä½¿ç”¨æ–¹å¼å¤§è‡´å¦‚ä¸‹ï¼š

```rust
fn main() {
    let a: i32 = 10;
    let b: i32 = 100_000;	// ä½¿ç”¨ `_` åˆ†éš”ï¼Œå¯ä»¥æ–¹ä¾¿è¯»æ•°
    let c = 100i32;
    let d = 10;				// è‹¥ä¸æŒ‡å®šç±»å‹ï¼ŒRust ä¼šè‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼Œæ•´å‹é»˜è®¤ i32ï¼Œæµ®ç‚¹é»˜è®¤ f64
    let e = 10.0;			// f64
}
```

é™¤æ•´æ•°ç±»å‹å¤–ï¼ŒRust è¿˜åŒ…å«æµ®ç‚¹æ•°ç±»å‹ã€å¸ƒå°”ç±»å‹ï¼ˆ`bool`ï¼‰ã€å­—ç¬¦ç±»å‹ï¼ˆ`char`ï¼‰ã€å…ƒç»„ç±»å‹ã€æ•°ç»„ç±»å‹ã€‚å…¶ä¸­æ•´æ•°ç±»å‹ã€æµ®ç‚¹æ•°ç±»å‹ã€å¸ƒå°”ç±»å‹ã€å­—ç¬¦ç±»å‹åˆè¢«ç§°ä¸ºæ ‡é‡ç±»å‹ï¼›å…ƒç»„ç±»å‹ã€æ•°ç»„ç±»å‹åˆè¢«ç§°ä¸ºå¤åˆç±»å‹ã€‚

æµ®ç‚¹ç±»å‹åˆ†ä¸ºï¼š`f32`ï¼Œ`f64`ï¼Œå¯ä»¥å°†å…¶ç®€å•çš„å¯¹åº”åˆ° C çš„ `float` å’Œ `double`

å¸ƒå°”ç±»å‹åˆ†ä¸ºï¼š`true`ï¼Œ`false`

å­—ç¬¦ç±»å‹æ˜¯ç”± `'` å•å¼•å·åŒ…å›´èµ·æ¥çš„å•ä¸ªå­—ç¬¦ï¼Œå¦‚ï¼š`let a: char = 'c';`ï¼Œç”±äº Rust çš„ç¼–ç æ˜¯ `UTF-8` ç¼–ç ï¼Œæ‰€ä»¥ `let heart_eyed_cat = 'ğŸ˜»';` ä¹Ÿæ˜¯æˆç«‹çš„ã€‚

å…ƒç»„ç±»å‹æŒ‡ç”±å°æ‹¬å·åŒ…å«çš„å€¼ï¼Œå…¶ä¸­æ¯ä¸ªå€¼ç”±é€—å·åˆ†éš”ï¼Œå…ƒç»„ä¸­æ¯ä¸ªç±»å‹å¯ä»¥ä¸ä¸€è‡´ã€‚å…ƒç»„é•¿åº¦å›ºå®šï¼Œä¸€æ—¦å£°æ˜ï¼Œå…¶é•¿åº¦å°†æ— æ³•è¢«ä¿®æ”¹

```rust
fn main() {
    let tuple: (i32, f64, char) = (10, 2.3, 'R');
    let (x, y, z) = tuple;							// æ­¤æ–¹æ³•ä¸º Rust ä¸­çš„æ¨¡å¼åŒ¹é…è¯­æ³•ï¼Œåç»­è¿˜ä¼šè¯´åˆ°
    let a = tuple.0;								// é€šè¿‡ç´¢å¼•å–æŒ‡å®šå€¼
    let b = tuple.1;
    let c = tuple.2;
}
```

æ•°ç»„ç±»å‹ç”±ä¸­æ‹¬å·åŒ…å«ï¼Œå…¶ä¸­çš„å€¼ç”±é€—å·åˆ†éš”ã€‚ä¸å…ƒç»„ä¸åŒï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ç±»å‹å¿…é¡»æ˜¯ç›¸åŒçš„ï¼ŒRust ä¸­çš„æ•°ç»„ä¸åŒäºå…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼ŒRust ä¸­çš„æ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½å¢åŠ æˆ–å‡å°‘ï¼ˆå¦‚æœæƒ³è¦è·å¾—å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸€æ ·çš„æ•°ç»„ï¼Œåº”è¯¥ä½¿ç”¨ Rust ä¸­çš„ vector ç±»å‹ï¼‰ã€‚

æ•°ç»„ä¸€èˆ¬ç”¨äºçŸ¥é“å›ºå®šé•¿åº¦çš„å…ƒç´ é›†åˆå¦‚ï¼šä¸€å¹´åäºŒä¸ªæœˆï¼Œå››ä¸ªå­£èŠ‚ç­‰ã€‚

``` rust
// æ•°ç»„å£°æ˜
fn main() {
    let month: [i32; 12] = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];		// i32 æŒ‡å®šç±»å‹ï¼Œ12 æŒ‡å®šæ•°ç»„é•¿åº¦
    let january = month[0];		// ç´¢å¼•ä» 0 å¼€å§‹
    let unkwon = month[13];		
    // æŠ›å‡ºå¼‚å¸¸ï¼šthread 'main' panicked at 'index out of bounds: the len is 11 but the index is 13'
}
```

å½“è®¿é—®æ— æ•ˆçš„æ•°ç»„å…ƒç´ æ—¶ï¼ŒRust ç¼–è¯‘ä¸ä¼šæŠ¥é”™ï¼Œç¨‹åºå°†ä¼šå‡ºç°ä¸€ä¸ª **è¿è¡Œæ—¶ï¼ˆ*runtime*ï¼‰** é”™è¯¯ï¼ŒRust ä¸­å¯¹æ­¤ç±»é”™è¯¯ä½¿ç”¨ panic æœ¯è¯­æ¥æè¿°ã€‚

### 2.3 ç¼–å†™å’Œè¿è¡Œå•å…ƒæµ‹è¯•

``` rust
#[test]
fn test_gcd() {
    assert_eq!(gcd(14, 15), 1);
    
    assert_eq!(gcd(2 * 3 * 5 * 11 * 17,
    			   3 * 7 * 11 * 13 * 19),
    		   3 * 11);
}
```

åœ¨ `shell` ä¸­è¿è¡Œå‘½ä»¤ `cargo test`ï¼Œcargo å°†ä¼šå¯»æ‰¾æ•´ä¸ªåŒ…ä¸­çš„æ‰€æœ‰åŒ…å« `#[test]` çš„å‡½æ•°å¹¶è¿è¡Œï¼Œ`#[test]` æ ‡è®°æ˜¯ **å±æ€§** çš„ä¸€ä¸ªä¾‹å­ã€‚

### åç»­

æˆ‘ä»¬å°†è·³è¿‡ç¬¬äºŒç« åä¸‰ä¸ªå°èŠ‚çš„å­¦ä¹ ï¼Œç›´æ¥å¼€å§‹å­¦ä¹ ç¬¬ä¸‰ç« çš„å†…å®¹ï¼Œåœ¨å­¦ä¹ å®Œæœ¬ä¹¦å†…å®¹ä¹‹åå°†ä¼šå¯¹è¿™ä¸‰å°èŠ‚çš„å†…å®¹æœ‰æ·±åˆ»çš„ç†è§£

\>\> Next: Rust ç¨‹åºè®¾è®¡ ç¬¬ 3 ç«  åŸºæœ¬ç±»å‹